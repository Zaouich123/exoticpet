@inherits LayoutComponentBase

<div class="container-fluid p-0 layout-shell fade-in">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid px-4">
            <a class="navbar-brand fw-bold" href="/">
                <span class="brand-icon">üêæ</span> Exotic Pet Manager
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <AuthorizeView>
                        <Authorized>
                            <li class="nav-item">
                                <a class="nav-link" href="/animals">Animals</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/profile">Profil</a>
                            </li>
                            <AuthorizeView Roles="gestionnaire">
                                <Authorized Context="adminCtx">
                                    <li class="nav-item">
                                        <a class="nav-link" href="/admin">Admin</a>
                                    </li>
                                </Authorized>
                            </AuthorizeView>
                        </Authorized>
                    </AuthorizeView>
                </ul>
                <div class="navbar-nav ms-auto align-items-center">
                    <AuthorizeView>
                        <Authorized>
                            <span class="navbar-text me-3 text-light">
                                @{
                                    var displayName = context.User.FindFirst("preferred_username")?.Value
                                                     ?? context.User.Identity?.Name
                                                     ?? "User";
                                }
                                <span class="user-icon">üë§</span> @displayName
                            </span>
                            <form action="/authentication/logout" method="get">
                                <button type="submit" class="btn btn-outline-light btn-sm">Logout</button>
                            </form>
                        </Authorized>
                        <NotAuthorized>
                            <a class="btn btn-outline-light btn-sm" href="/authentication/login">Login</a>
                        </NotAuthorized>
                    </AuthorizeView>
                </div>
            </div>
        </div>
    </nav>
    
    <main>
        @Body
    </main>
</div>

<style>
    .brand-icon {
        font-size: 1.5rem;
        margin-right: 0.5rem;
    }
    
    .user-icon {
        font-size: 1.2rem;
        margin-right: 0.25rem;
    }
    
    .navbar {
        border-bottom: 3px solid #667eea;
    }
    
    main {
        min-height: calc(100vh - 56px);
    }
</style>
